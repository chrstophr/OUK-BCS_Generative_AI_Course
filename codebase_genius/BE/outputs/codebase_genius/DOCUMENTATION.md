# codebase_genius

*Comprehensive code documentation auto-generated by Codebase Genius*

---

## ğŸ“– Project Overview

Codebase Genius is an AI-powered documentation generator designed to analyze software repositories and produce comprehensive markdown documentation. It addresses the challenge of keeping documentation up-to-date and accessible by automatically extracting insights from code. The system leverages a multi-agent architecture and large language models (LLMs) to create structured documentation, dependency graphs, code analysis reports, and architectural overviews.

The software boasts several key features, including automatic code analysis for Python and Jac, dependency visualization using Graphviz, and LLM-enhanced documentation generation. It supports multiple languages and outputs documentation in markdown format for easy integration into existing workflows. Key technologies used include JacLang, Tree-sitter, Graphviz, byLLM, Gemini AI, and Streamlit.

Codebase Genius is targeted towards software developers, architects, and technical writers who need to quickly generate and maintain accurate documentation for their projects. It simplifies the documentation process, allowing users to focus on development while ensuring that their codebase is well-documented. The software can be used directly from the command line or through a web interface, making it accessible to a wide range of users and use cases.


## ğŸš€ Installation

1.  **Prerequisites:**
    *   Python 3.10 or higher
    *   Git
    *   Graphviz

2.  **Cloning the Repository:**
    ```bash
    git clone <repository_url>
    cd <repository_directory>
    ```

3.  **Setting up a Virtual Environment:**
    ```bash
    python3 -m venv .venv
    source .venv/bin/activate  # On Linux/macOS
    .venv\Scripts\activate  # On Windows
    ```

4.  **Installing Dependencies (Backend):**
    ```bash
    pip install -r requirements.txt
    ```

5.  **Environment Variables:**
    *   Set any required environment variables as specified in the project (e.g., LLM provider keys).  Refer to project documentation for specific variable names and instructions.

6.  **Install Graphviz:**
    *   Install Graphviz using your system's package manager (e.g., `apt-get install graphviz` on Debian/Ubuntu, `brew install graphviz` on macOS).

7.  **Frontend Setup (Optional):**
    ```bash
    cd FE
    pip install -r requirements.txt
    streamlit run app.py
    ```


## ğŸ’» Usage

# Codebase Genius Usage Instructions

## Running the Application

Codebase Genius can be run either from the command line using the Jac program or through the Streamlit web interface.

### 1. Command Line (using `main.jac`)

This method involves using the `main.jac` entry point to analyze a repository and generate documentation.

**Prerequisites:**

*   Python 3.10+
*   JacLang installed
*   Git
*   Graphviz

**Steps:**

1.  **Clone the Repository:**

    ```bash
    git clone <repository_url>
    cd <repository_directory>
    ```

2.  **Set up a Virtual Environment (Recommended):**

    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Linux/macOS
    .venv\Scripts\activate  # On Windows
    ```

3.  **Install Dependencies:**

    ```bash
    pip install -r requirements.txt
    ```

4.  **Set Environment Variables:**  Ensure your LLM API key is set as an environment variable. For example, if using Gemini:

    ```bash
    export GEMINI_API_KEY="YOUR_GEMINI_API_KEY"  # Replace with your actual API key
    ```

5.  **Run the Analysis:**

    ```bash
    jac run main.jac --repo_url <github_repository_url> --output_path <output_directory>
    ```

    *   `--repo_url`:  The URL of the GitHub repository to analyze (e.g., `https://github.com/jaseci-ai/jac`).
    *   `--output_path`: The directory where the generated documentation will be saved (e.g., `docs`). If the directory doesn't exist it will be created.

    **Example:**

    ```bash
    jac run main.jac --repo_url https://github.com/jaseci-ai/jac --output_path ./jac_docs
    ```

    This command will analyze the Jaseci/Jac repository and save the generated documentation in the `jac_docs` directory.

### 2. Web Interface (using `app.py`)

This method uses a Streamlit application to provide a user-friendly interface for analyzing repositories.

**Prerequisites:**

*   Python 3.10+
*   Dependencies installed
*   Git
*   Graphviz

**Steps:**

1.  **Navigate to the Frontend Directory:**  If your project structure has a frontend directory, navigate to it.  If not, ensure you are in the root directory where `app.py` resides.

    ```bash
    # Assuming there's a 'FE' directory for the frontend
    cd FE
    ```

2.  **Install Dependencies:**

    ```bash
    pip install -r requirements.txt # Or any similar file
    ```

3.  **Set Environment Variables:**  As with the command-line method, ensure your LLM API key is set:

    ```bash
    export GEMINI_API_KEY="YOUR_GEMINI_API_KEY"  # Replace with your actual API key
    ```

4.  **Run the Streamlit App:**

    ```bash
    streamlit run app.py
    ```

    This command will start the Streamlit application, and you can access it through your web browser (usually at `http://localhost:8501`).

5.  **Using the Web Interface:**
    *   Enter the GitHub repository URL in the provided field.
    *   Click the "Generate Documentation" button.
    *   The application will analyze the repository and display the generated documentation.

## Common Use Cases or Examples

*   **Generating Documentation for a GitHub Repository:** The primary use case is to automatically generate documentation for a software repository hosted on GitHub.  This can be used for personal projects, open-source libraries, or enterprise software.

*   **Analyzing Code Structure:** Codebase Genius can be used to understand the architecture and dependencies of a codebase, even without generating full documentation.

*   **Creating a Knowledge Base:** The generated documentation can serve as a knowledge base for new team members or for developers unfamiliar with a particular codebase.

## Command-Line Arguments (for `main.jac`)

*   `--repo_url`: (Required) The URL of the GitHub repository to analyze.
*   `--output_path`: (Required) The directory where the generated documentation will be saved.

## Expected Output

The output will be a directory containing:

*   **Main Documentation File:**  A Markdown file (e.g., `documentation.md`) containing the comprehensive documentation for the repository.
*   **Dependency Graphs:**  Image files (e.g., `.png` or `.svg`) visualizing the dependencies between different parts of the codebase.  These graphs require Graphviz to be properly generated.

The exact content of the documentation will depend on the complexity and structure of the analyzed repository. It generally includes:

*   Overview of the project
*   Architecture description
*   Code analysis and explanations
*   Dependency relationships
*   API documentation

## Configuration

You can configure the Codebase Genius in several ways:

*   **LLM Provider:** The default LLM provider is Gemini.  To use a different LLM provider, you may need to modify the code to integrate with the API of the desired provider and set the corresponding API key as an environment variable.

*   **Analysis Depth:** You can adjust the depth of the analysis to control the level of detail in the generated documentation.  This might involve modifying parameters within the `main.jac` file or through additional command-line arguments (if implemented).


## ğŸ“Š Codebase Statistics

- **Files Analyzed**: 6
- **Total Classes**: 21
- **Total Functions**: 57
- **Function Calls Tracked**: 124

## ğŸ“ Repository Structure

```
ğŸ“¦ codebase_genius
â”‚
â”œâ”€â”€ ğŸ“„ analyzer_utils.py
â”‚   â”œâ”€â”€ âš™ï¸  init_parser()
â”‚   â”œâ”€â”€ âš™ï¸  convert_jac_to_python()
â”‚   â”œâ”€â”€ âš™ï¸  extract_entities_minimal()
â”‚   â”œâ”€â”€ âš™ï¸  extract_call_relationships()
â”‚   â”œâ”€â”€ âš™ï¸  build_dependency_tree()
â”‚   â””â”€â”€ â‹¯ 5 more functions
â”‚
â”œâ”€â”€ ğŸ“„ main.jac
â”‚   â”œâ”€â”€ ğŸ”· AgentTypes (Class)
â”‚   â”œâ”€â”€ ğŸ”· WorkflowStage (Class)
â”‚   â”œâ”€â”€ ğŸ”· CodeGenius (Class)
â”‚   â”œâ”€â”€ ğŸ”· Agent (Class)
â”‚   â”œâ”€â”€ ğŸ”· RepoHandler (Class)
â”‚   â”œâ”€â”€ ğŸ”· RepoMapper (Class)
â”‚   â”œâ”€â”€ ğŸ”· CodeAnalyzer (Class)
â”‚   â”œâ”€â”€ ğŸ”· DocGenie (Class)
â”‚   â”œâ”€â”€ ğŸ”· supervisor (Class)
â”‚   â”œâ”€â”€ ğŸ”· analyze_repo_api (Class)
â”‚   â”œâ”€â”€ ğŸ”· __specs__ (Class)
â”‚   â”œâ”€â”€ âš™ï¸  log_progress()
â”‚   â”œâ”€â”€ âš™ï¸  call_next_agent()
â”‚   â”œâ”€â”€ âš™ï¸  validate_and_clone_repo()
â”‚   â”œâ”€â”€ âš™ï¸  execute_clone()
â”‚   â”œâ”€â”€ âš™ï¸  generate_repo_structure()
â”‚   â””â”€â”€ â‹¯ 19 more functions
â”‚
â”œâ”€â”€ ğŸ“„ utils.jac
â”‚   â””â”€â”€ âš™ï¸  get_current_datetime()
â”‚
â”œâ”€â”€ ğŸ“„ agent_core.jac
â”‚   â”œâ”€â”€ ğŸ”· AgentTypes (Class)
â”‚   â”œâ”€â”€ ğŸ”· Agent (Class)
â”‚   â”œâ”€â”€ ğŸ”· Memory (Class)
â”‚   â”œâ”€â”€ ğŸ”· Session (Class)
â”‚   â”œâ”€â”€ ğŸ”· supervisor (Class)
â”‚   â”œâ”€â”€ ğŸ”· __specs__ (Class)
â”‚   â”œâ”€â”€ ğŸ”· agent (Class)
â”‚   â”œâ”€â”€ ğŸ”· __specs__ (Class)
â”‚   â”œâ”€â”€ ğŸ”· get_all_sessions (Class)
â”‚   â”œâ”€â”€ ğŸ”· __specs__ (Class)
â”‚   â”œâ”€â”€ âš™ï¸  add_history()
â”‚   â”œâ”€â”€ âš™ï¸  get_history()
â”‚   â”œâ”€â”€ âš™ï¸  set_current_state()
â”‚   â”œâ”€â”€ âš™ï¸  get_current_state()
â”‚   â”œâ”€â”€ âš™ï¸  add_agent_execution()
â”‚   â””â”€â”€ â‹¯ 11 more functions
â”‚
â”œâ”€â”€ ğŸ“„ test_tree_sitter.py
â”‚   â””â”€â”€ âš™ï¸  walk()
â”‚
â””â”€â”€ ğŸ“„ app.py
    â”œâ”€â”€ âš™ï¸  get_repo_name()
    â”œâ”€â”€ âš™ï¸  check_outputs_exist()
    â”œâ”€â”€ âš™ï¸  run_jac_pipeline()
    â”œâ”€â”€ âš™ï¸  load_markdown_doc()
    â””â”€â”€ âš™ï¸  load_json_output()
```

## ğŸ—ï¸ Architecture

The architecture of the Jac repository involves several key components, each represented by a specific class or walker in the code. These components work together to analyze, map, and document the code. Here's an overview of the architecture:

**1. Agents:**

*   **CodeGenius:** This agent likely handles code generation tasks.
*   **RepoHandler:** Responsible for validating and cloning the repository. It includes functions for executing the clone operation.
*   **RepoMapper:** This agent maps the repository structure and summarizes the README file.
*   **CodeAnalyzer:** Analyzes the code to extract information such as call relationships, entities, and statistics.
*   **DocGenie:** Generates documentation for the repository, including overview, installation, usage, and architecture sections.

**2. Supervisors and Walkers:**

*   **supervisor (Walker):** Manages the workflow by routing tasks to different agents.
*   **analyze\_repo\_api (Walker):** Serves as the entry point for the analysis process.
*   **agent (Walker):** Generic agent walker for routing.
*    **get_all_sessions (Walker):** Retrieves all sessions.

**3. Data Structures:**

*   **AgentTypes (Enum):** Defines the different types of agents in the system.
*   **WorkflowStage (Enum):** Defines the different stages of the workflow.
*   **Memory (Node):** Represents memory nodes.
*   **Session (Node):** Represents session nodes, managing agent execution history and state.

**4. Key Functions and Processes:**

*   **Repository Handling:** The `RepoHandler` class is responsible for validating and cloning the repository using the `validate_and_clone_repo` and `execute_clone` functions.
*   **Code Analysis:** The `CodeAnalyzer` class performs static analysis of the code using functions like `run_code_analysis`, `get_callers`, `get_callees`, `get_file_entities`, and `list_entities`. It also calculates and prints summary statistics.
*   **Documentation Generation:** The `DocGenie` class generates the documentation using functions like `write_overview`, `write_installation`, `write_usage`, `write_architecture`, and `generate_markdown`. The `execute_docgen` function likely orchestrates the documentation generation process.
*   **Workflow Management:** The `supervisor` walker manages the overall workflow by routing tasks to the appropriate agents based on the current state and agent type. The `route_workflow` function handles the routing logic.
*   **Agent Execution:** The `agent` walker executes the node.
*   **Session Management:** The `Session` class manages agent execution history and state.

**5. Workflow:**

1.  The `analyze_repo_api` walker starts the process.
2.  The `supervisor` walker routes the workflow to the appropriate agents.
3.  The `RepoHandler` clones the repository.
4.  The `RepoMapper` maps the repository structure.
5.  The `CodeAnalyzer` analyzes the code.
6.  The `DocGenie` generates the documentation.

This architecture allows for a modular and extensible system for analyzing and documenting code repositories. Each component has a specific responsibility, making the code easier to maintain and evolve.


## ğŸ“š API Reference

### Classes

| Class Name | Base Classes | File | Line |
|------------|--------------|------|------|
| `AgentTypes` | Enum | main.jac | 20 |
| `WorkflowStage` | Enum | main.jac | 28 |
| `CodeGenius` | Node | main.jac | 42 |
| `Agent` | Node | main.jac | 48 |
| `RepoHandler` | Agent, Node | main.jac | 51 |
| `RepoMapper` | Agent, Node | main.jac | 121 |
| `CodeAnalyzer` | Agent, Node | main.jac | 206 |
| `DocGenie` | Agent, Node | main.jac | 309 |
| `supervisor` | Walker | main.jac | 529 |
| `analyze_repo_api` | Walker | main.jac | 575 |
| `__specs__` | Obj | main.jac | 578 |
| `AgentTypes` | Enum | agent_core.jac | 11 |
| `Agent` | Node | agent_core.jac | 19 |
| `Memory` | Node | agent_core.jac | 22 |
| `Session` | Node | agent_core.jac | 25 |
| `supervisor` | Walker | agent_core.jac | 76 |
| `__specs__` | Obj | agent_core.jac | 80 |
| `agent` | Walker | agent_core.jac | 121 |
| `__specs__` | Obj | agent_core.jac | 125 |
| `get_all_sessions` | Walker | agent_core.jac | 154 |
| `__specs__` | Obj | agent_core.jac | 156 |

### Functions

#### ğŸ“„ `analyzer_utils.py`

| Function | Type | Line | Parent Class |
|----------|------|------|-------------|
| `init_parser()` | Function | 37 | - |
| `convert_jac_to_python()` | Function | 52 | - |
| `extract_entities_minimal()` | Function | 80 | - |
| `extract_call_relationships()` | Function | 144 | - |
| `build_dependency_tree()` | Function | 186 | - |
| `build_class_hierarchy()` | Function | 247 | - |
| `run_analysis()` | Function | 283 | - |
| `get_callers()` | Function | 396 | - |
| `get_callees()` | Function | 402 | - |
| `get_file_entities()` | Function | 407 | - |

#### ğŸ“„ `main.jac`

| Function | Type | Line | Parent Class |
|----------|------|------|-------------|
| `log_progress()` | Function | 36 | - |
| `call_next_agent()` | Method | 45 | CodeGenius |
| `validate_and_clone_repo()` | Method | 54 | RepoHandler |
| `execute_clone()` | Method | 102 | RepoHandler |
| `generate_repo_structure()` | Method | 124 | RepoMapper |
| `summarize_readme()` | Method | 149 | RepoMapper |
| `execute_mapping()` | Method | 153 | RepoMapper |
| `run_code_analysis()` | Method | 209 | CodeAnalyzer |
| `get_callers()` | Method | 220 | CodeAnalyzer |
| `get_callees()` | Method | 229 | CodeAnalyzer |
| `get_file_entities()` | Method | 234 | CodeAnalyzer |
| `list_entities()` | Method | 242 | CodeAnalyzer |
| `get_stats()` | Method | 255 | CodeAnalyzer |
| `print_summary()` | Method | 258 | CodeAnalyzer |
| `execute_analysis()` | Method | 274 | CodeAnalyzer |
| `write_overview()` | Method | 313 | DocGenie |
| `write_installation()` | Method | 331 | DocGenie |
| `write_usage()` | Method | 335 | DocGenie |
| `write_architecture()` | Method | 338 | DocGenie |
| `generate_markdown()` | Method | 341 | DocGenie |
| `execute_docgen()` | Method | 467 | DocGenie |
| `route_workflow()` | Method | 536 | supervisor |
| `init_graph()` | Method | 555 | supervisor |
| `start()` | Method | 582 | analyze_repo_api |

#### ğŸ“„ `utils.jac`

| Function | Type | Line | Parent Class |
|----------|------|------|-------------|
| `get_current_datetime()` | Function | 4 | - |

#### ğŸ“„ `agent_core.jac`

| Function | Type | Line | Parent Class |
|----------|------|------|-------------|
| `add_history()` | Method | 33 | Session |
| `get_history()` | Method | 36 | Session |
| `set_current_state()` | Method | 39 | Session |
| `get_current_state()` | Method | 42 | Session |
| `add_agent_execution()` | Method | 45 | Session |
| `get_execution_count()` | Method | 48 | Session |
| `get_consecutive_count()` | Method | 51 | Session |
| `should_prevent_loop()` | Method | 60 | Session |
| `get_execution_summary()` | Method | 71 | Session |
| `get_agent_class()` | Method | 83 | supervisor |
| `route_to_agent()` | Method | 93 | supervisor |
| `supervise()` | Method | 97 | supervisor |
| `get_node_class()` | Method | 128 | agent |
| `route_to_node()` | Method | 138 | agent |
| `execute()` | Method | 142 | agent |
| `get_all_sessions()` | Method | 160 | get_all_sessions |

#### ğŸ“„ `test_tree_sitter.py`

| Function | Type | Line | Parent Class |
|----------|------|------|-------------|
| `walk()` | Function | 19 | - |

#### ğŸ“„ `app.py`

| Function | Type | Line | Parent Class |
|----------|------|------|-------------|
| `get_repo_name()` | Function | 28 | - |
| `check_outputs_exist()` | Function | 32 | - |
| `run_jac_pipeline()` | Function | 47 | - |
| `load_markdown_doc()` | Function | 62 | - |
| `load_json_output()` | Function | 69 | - |

## ğŸ“ˆ Dependency Visualizations

### Code Dependency Tree

This diagram shows the hierarchical structure of the codebase, including files, classes, functions, and their call relationships.

![Dependency Tree](graphs/dependency_tree.png)

### Class Inheritance Hierarchy

This diagram illustrates the inheritance relationships between classes.

![Class Hierarchy](graphs/class_hierarchy.png)

## ğŸ”— Key Function Relationships

### Most Called Functions

These functions are called most frequently throughout the codebase:

| Function | Called By (count) |
|----------|-------------------|
| `call_llm()` | 6 times |
| `llm()` | 6 times |
| `get_mtir()` | 6 times |
| `basename()` | 4 times |
| `add_agent_execution()` | 4 times |
| `visit_node()` | 3 times |
| `dirname()` | 3 times |
| `connect()` | 3 times |
| `jobj()` | 3 times |
| `log_report()` | 3 times |

### Functions with Most Dependencies

These functions call the most other functions:

| Function | Calls (count) |
|----------|---------------|
| `supervise()` | 10 functions |
| `run_analysis()` | 9 functions |
| `execute_docgen()` | 9 functions |
| `init_graph()` | 8 functions |
| `build_dependency_tree()` | 7 functions |
| `build_class_hierarchy()` | 6 functions |
| `execute()` | 6 functions |
| `validate_and_clone_repo()` | 5 functions |
| `convert_jac_to_python()` | 4 functions |
| `visit_node()` | 4 functions |

---

*This documentation was automatically generated by [Codebase Genius](https://github.com/chrstophr/codebase_genius) using AI-powered code analysis and natural language generation.*

*Generated on: 2025-11-11 11:27:31*
